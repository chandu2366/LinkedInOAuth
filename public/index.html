<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Linked in Application</title>
    <link rel="stylesheet" href="bower_components/bootstrap/dist/css/bootstrap.min.css">
    <script src="bower_components/jquery/dist/jquery.js"></script>
    <script src="bower_components/bootstrap/dist/js/bootstrap.min.js"></script>
    <link rel="stylesheet" href="custom.css">
</head>
<body>

<div class="container">
  <form class="sign-in">

    <div><h1>Authentication screen</h1></div>
    <div class="input-group">
        <input type="text" class="form-control" placeholder="username">
    </div>

    <div class="input-group">
        <input type="text" class="form-control" placeholder="password">
    </div>
    <div class="btn-link"><a href="/auth/linkedin"  class="btn btn-success">Go to Linked in</a></div>
    </form>
    <div id="login-status"></div>
</div>

<script>

//    var xhr = new XMLHttpRequest();
//    xhr.open('');

    $(function () {
        console.log('hello world from the linked in app');
        // check if the user is logged in ...
        $.ajax({
            url: '/account',
            success: function (data, status, jqXHR) {
                console.log('1   =' + data[0]);
                console.log('1a   =' + status);
                console.log('1b   =' + jqXHR);
                // user is authenticated
                $('#login-status').html('Hi ' + data.user.displayName + '! What do you want to get done today?'); // this username is set in app.js
            },
            error: function (jqXHR) {
                if (jqXHR.status === 401) {
                    // user is not authenticated
                    $('#login-status').html('You are not logged in, please use the following button to login ... ');
                }
                console.log(jqXHR);
            }
        });
    });

</script>
</body>
</html>